<%= semantic_form_for @geograph do |f| %>
    <%= f.inputs do %>
        <%= f.input :name %>
        <% if @geograph.measures.empty? %>
        <%= f.input :import_data, :label => 'Data',
          :hint => t('formtastic.hints.geo_graph.import_data', :column_names => Code::Application.config.place_column_names[:required].collect{ |k, v| "\"#{v}\"" }.join(', ')) %>
        <% end %>
        <%= f.input :color_theme, :as => :radio, :value_as_class => true, :member_label => '', :wrapper_html => { :class => :gradient } %>
        <% if ExternalDataSource.count > 0 and (@geograph.measures.empty? or @geograph.has_api_abbrs?) %>
            <%= f.input :external_data_sources, :as => :check_boxes %>
        <% end %>
        <% unless @geograph.measures.selectable.empty? %>
            <%= f.input :size_measure, :as => :select, :collection => @geograph.measures.selectable, :include_blank => false %>
            <%= f.input :color_measure, :as => :select, :collection => @geograph.measures.selectable, :include_blank => false %>
        <% end %>
    <% end %>
    <%= f.inputs 'Advanced', :class => 'toggler' do %>
        <%= f.input :min_spot_size %>
        <%= f.input :max_spot_size %>
        <%= f.input :num_legend_sizes %>
        <%= f.input :num_legend_colors %>
        <%= f.input :num_zoom_levels %>
    <% end %>
    <% unless @geograph.measures.selectable.empty? %>
        <%= f.inputs 'Configure Measures', :class => 'toggler' do %>
            <%= f.inputs :for => :measures do |measure, i| %>
                <% if ['numeric', 'yes_no'].include? measure.object.datatype %>
                    <%= f.inputs :name => measure.object.name, :class => 'measure-config' do %>
                        <% if measure.object.datatype == 'numeric' %>
                            <%= measure.input :log_scale %>
                        <% end %>
                        <%= measure.input :reverse_color_theme %>
                    <% end %>
                <% end %>
            <% end %>
        <% end %>
    <% end %>
    <%= f.actions %>
<% end %>
